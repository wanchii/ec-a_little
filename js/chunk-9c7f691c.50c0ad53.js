(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c7f691c"],{7157:function(t,a,s){"use strict";s.r(a);var r=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading,loader:"dots"},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-5 col-md-12 col-12 order-1 order-md-2 mb-4 mb-md-0"},[s("div",{staticClass:"accordion d-md-none d-block",attrs:{id:"accordionExample"}},[s("div",{staticClass:"bg-base card border-0 rounded-0"},[s("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[s("button",{staticClass:"btn w-100 d-flex align-items-center",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",id:"orderCollapse"}},[s("span",{staticClass:"mr-auto"},[t._v("訂單明細")]),s("span",{staticClass:"text-primary-dark font-weight-bold h5 mb-0 mr-2"},[t._v(" NT"+t._s(t.order.amount)+" ")]),s("i",{staticClass:"fas fa-chevron-down"})])]),s("div",{staticClass:"collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[s("div",{staticClass:"card-body"},[s("table",{staticClass:"table order-table"},[s("thead",t._l(t.order_products,(function(a,r){return s("tr",{key:r},[s("td",[s("img",{staticClass:"table-img",attrs:{src:a.product.imageUrl[0],alt:a.product.title}})]),s("td",{staticClass:"font-weight-bold text-vcraftsman-dark"},[t._v(" "+t._s(a.product.title)+" "+t._s(a.quantity)+" ")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.product.price*a.quantity))+" ")])])})),0),s("tbody",[s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("小計")]),s("td",{staticClass:"text-right"},[t._v("NT"+t._s(t._f("currency")(t.subTotal)))])]),s("tr",[t.order.coupon?s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.order.coupon))]):s("td",{staticClass:"text-muted",attrs:{colspan:"2"}},[t._v(" 沒有使用優惠券")]),s("td",{staticClass:"text-right text-danger"},[t._v(t._s(t._f("currency")(t.discount))+" ")])])]),s("tfoot",[s("tr",[s("td",{staticClass:"font-weight-bold",attrs:{colspan:"2"}},[t._v("總共")]),s("td",{staticClass:"text-right font-weight-bold"},[t._v("NT"+t._s(t._f("currency")(t.order.amount)))])])])])])])])]),s("div",{staticClass:"bg-base py-6 px-3 d-md-block d-none"},[s("h3",{staticClass:"px-5"},[t._v("訂單明細")]),s("div",{staticClass:"order p-5"},[s("table",{staticClass:"table order-table"},[s("thead",t._l(t.order_products,(function(a,r){return s("tr",{key:r},[s("td",[s("img",{staticClass:"table-img",attrs:{src:a.product.imageUrl[0],alt:a.product.title}})]),s("td",{staticClass:"font-weight-bold text-vcraftsman-dark"},[t._v(" "+t._s(a.product.title)+" "+t._s(a.quantity)+" ")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.product.price*a.quantity))+" ")])])})),0),s("tbody",[s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("小計")]),s("td",{staticClass:"text-right"},[t._v("NT"+t._s(t._f("currency")(t.subTotal)))])]),s("tr",[t.order.coupon?s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.order.coupon))]):s("td",{staticClass:"text-muted",attrs:{colspan:"2"}},[t._v(" 沒有使用優惠券")]),s("td",{staticClass:"text-right text-danger"},[t._v(t._s(t._f("currency")(t.discount))+" ")])])]),s("tfoot",[s("tr",[s("td",{staticClass:"font-weight-bold",attrs:{colspan:"2"}},[t._v("總共")]),s("td",{staticClass:"text-right font-weight-bold"},[t._v("NT"+t._s(t._f("currency")(t.order.amount)))])])])])])])]),s("div",{staticClass:"col-lg-7 col-md-12 col-12 mb-md-3 order-2 order-md-1"},[s("div",{staticClass:"sticky-top"},[s("div",{staticClass:"check border mt-1 p-3"},[t._m(0),s("div",{staticClass:"mb-4"},[s("div",{staticClass:"d-flex align-items-center bg-light p-2 mb-2"},[s("h6",{staticClass:"font-weight-bold text-muted mb-0"},[t._v("訂購姓名:")]),s("p",{staticClass:"mb-0 ml-2 text-primary-light"},[t._v(t._s(t.order.user.name))])]),s("div",{staticClass:"d-flex align-items-center bg-light p-2 mb-2"},[s("h6",{staticClass:"font-weight-bold text-muted mb-0"},[t._v("電子郵件:")]),s("p",{staticClass:"mb-0 ml-2 text-primary-light"},[t._v(t._s(t.order.user.email))])]),s("div",{staticClass:"d-flex align-items-center bg-light p-2 mb-2"},[s("h6",{staticClass:"font-weight-bold text-muted mb-0"},[t._v("地址:")]),s("p",{staticClass:"mb-0 ml-2 text-primary-light"},[t._v(t._s(t.order.user.address))])])]),s("h4",[t._v("付款確認")]),s("div",{staticClass:"p-2 bg-light d-flex justify-content-between mb-4"},[s("h6",{staticClass:"font-weight-bold text-muted mb-0"},[t._v("付款方式")]),s("p",{staticClass:"mb-0 text-primary-light"},[t._v(t._s(t.order.payment))])]),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-danger",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.preventDefault(),t.payNow(a)}}},[t._v(" 確認付款 "),t.isProcessing?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()])])])])])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb  mb-4"},[s("li",{staticClass:"breadcrumb-item"},[t._v(" 購物車 ")]),s("li",{staticClass:"breadcrumb-item"},[t._v(" 訂購資訊 ")]),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("付款")])])])}],i=(s("99af"),s("4160"),s("159b"),{data:function(){return{order:{user:{}},orderId:"",order_products:[],subTotal:0,discount:0,isLoading:!1,isProcessing:!1,errorData:[]}},created:function(){this.orderId=this.$route.params,this.getOrder()},methods:{getOrder:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/orders/").concat(this.orderId.id);this.isLoading=!0,this.$http.get(a).then((function(a){t.order=a.data.data,t.order_products=t.order.products,t.order_products.forEach((function(a){t.subTotal+=a.product.price*a.quantity})),t.isLoading=!1})).catch((function(){t.$toast.error("無法取得資料，請聯絡客服"),t.isLoading=!1}))},payNow:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/orders/").concat(this.orderId.id,"/paying");this.isProcessing=!0,this.$http.post(a).then((function(a){a.data.data.paid&&t.$router.push("/welldone"),t.isProcessing=!1})).catch((function(a){var s=a.response.data.errors;t.$toast.error("".concat(s)),t.isProcessing=!1}))}}}),c=i,o=s("2877"),d=Object(o["a"])(c,r,e,!1,null,"692d1665",null);a["default"]=d.exports},"99af":function(t,a,s){"use strict";var r=s("23e7"),e=s("d039"),i=s("e8b5"),c=s("861d"),o=s("7b0b"),d=s("50c4"),n=s("8418"),l=s("65f0"),u=s("1dde"),p=s("b622"),b=s("2d00"),m=p("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",f=b>=51||!e((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),_=u("concat"),v=function(t){if(!c(t))return!1;var a=t[m];return void 0!==a?!!a:i(t)},C=!f||!_;r({target:"Array",proto:!0,forced:C},{concat:function(t){var a,s,r,e,i,c=o(this),u=l(c,0),p=0;for(a=-1,r=arguments.length;a<r;a++)if(i=-1===a?c:arguments[a],v(i)){if(e=d(i.length),p+e>h)throw TypeError(g);for(s=0;s<e;s++,p++)s in i&&n(u,p,i[s])}else{if(p>=h)throw TypeError(g);n(u,p++,i)}return u.length=p,u}})}}]);
//# sourceMappingURL=chunk-9c7f691c.50c0ad53.js.map